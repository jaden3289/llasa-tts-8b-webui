# =============================================================================
# Llasa-TTS-8B 环境变量配置文件
# 复制此文件为 .env 并根据需要修改配置
# =============================================================================

# -----------------------------------------------------------------------------
# GPU 配置
# -----------------------------------------------------------------------------

# GPU ID（自动选择最空闲的 GPU，由 start.sh 自动设置）
NVIDIA_VISIBLE_DEVICES=0
CUDA_VISIBLE_DEVICES=0

# GPU 空闲超时时间（秒）
# 模型在 GPU 上空闲超过此时间后会自动卸载到 CPU
# 默认: 600 秒（10 分钟）
GPU_IDLE_TIMEOUT=600

# -----------------------------------------------------------------------------
# 服务端口配置
# -----------------------------------------------------------------------------

# Gradio Web UI 端口
UI_PORT=7860

# REST API 端口
API_PORT=7861

# MCP 服务器端口（如果单独运行）
MCP_PORT=7862

# -----------------------------------------------------------------------------
# HuggingFace 配置
# -----------------------------------------------------------------------------

# HuggingFace 镜像地址（国内用户建议使用镜像）
HF_ENDPOINT=https://hf-mirror.com

# HuggingFace Token（如果需要下载需要授权的模型）
# 获取方式：https://huggingface.co/settings/tokens
# HF_TOKEN=your_huggingface_token_here

# -----------------------------------------------------------------------------
# 模型路径配置
# -----------------------------------------------------------------------------

# Llasa-8B 模型路径（可以是 HuggingFace 模型 ID 或本地路径）
LLASA_MODEL_PATH=HKUSTAudio/Llasa-8B

# XCodec2 模型路径
XCODEC_MODEL_PATH=HKUSTAudio/xcodec2

# Faster-Whisper 模型路径
WHISPER_MODEL_PATH=Systran/faster-whisper-large-v3

# Whisper 设备（cpu 或 cuda）
# 默认使用 cpu 以节省显存，如果显存充足可以改为 cuda
WHISPER_DEVICE=cpu

# -----------------------------------------------------------------------------
# 存储目录配置
# -----------------------------------------------------------------------------

# 模型缓存目录（用于存储从 HuggingFace 下载的模型）
MODELS_CACHE_DIR=./models_cache

# 输出目录（生成的音频文件）
OUTPUTS_DIR=./outputs

# 临时文件目录
TEMP_DIR=./temp

# -----------------------------------------------------------------------------
# Docker 资源限制
# -----------------------------------------------------------------------------

# 内存限制（建议至少 32GB）
MEM_LIMIT=32g

# 共享内存大小（建议 8GB）
SHM_SIZE=8g

# -----------------------------------------------------------------------------
# 应用配置
# -----------------------------------------------------------------------------

# 默认采样率
DEFAULT_SAMPLE_RATE=24000

# 默认随机种子
DEFAULT_RANDOM_SEED=49

# 最大文本长度
MAX_TEXT_LENGTH=300

# 最大音频长度（秒）
MAX_AUDIO_DURATION=20

# -----------------------------------------------------------------------------
# API 配置
# -----------------------------------------------------------------------------

# API 密钥（可选，用于保护 API）
# API_KEY=your_secret_api_key_here

# CORS 允许的源（多个用逗号分隔）
# CORS_ORIGINS=*

# API 请求速率限制（每分钟请求数）
# API_RATE_LIMIT=60

# -----------------------------------------------------------------------------
# 日志配置
# -----------------------------------------------------------------------------

# 日志级别（DEBUG, INFO, WARNING, ERROR, CRITICAL）
LOG_LEVEL=INFO

# 日志文件路径
# LOG_FILE=./logs/app.log

# -----------------------------------------------------------------------------
# 高级配置
# -----------------------------------------------------------------------------

# 是否启用自动卸载（任务完成后立即卸载 GPU）
AUTO_OFFLOAD=true

# 是否启用详细日志
VERBOSE=false

# Gradio 是否启用队列
GRADIO_ENABLE_QUEUE=true

# Gradio 最大并发数
GRADIO_MAX_THREADS=1
